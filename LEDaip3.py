#!/usr/bin/env python3
import time
import wiringpi as w 

P_ANO = [4, 9, 10, 18, 23, 27, 17]
P_MOT = 13

DT = [
[
[ 0,0,0,0,0,0,1,0,0,0,0],
[ 0,0,1,0,1,1,1,1,0,0,0],
[ 0,0,1,1,0,0,1,0,1,0,0],
[ 0,0,1,1,0,0,1,0,1,0,0],
[ 0,0,1,0,0,0,1,0,1,0,0],
[ 0,0,1,0,0,1,0,0,1,0,0],
[ 0,0,0,0,0,1,0,1,0,0,0]
],[
[ 0,0,0,0,0,1,0,0,0,0,0],
[ 0,0,0,1,1,1,1,1,0,0,1],
[ 0,0,1,0,0,0,0,0,1,0,0],
[ 0,0,0,0,0,0,0,0,1,0,0],
[ 0,0,0,0,0,0,0,0,1,0,0],
[ 0,0,0,0,0,0,0,1,0,0,1],
[ 0,0,0,0,0,1,1,0,0,0,0]
],[
[ 0,0,0,1,1,1,1,1,0,0,0],
[ 0,0,1,0,0,0,0,0,1,0,0],
[ 0,0,0,0,0,0,0,1,0,0,0],
[ 0,0,0,0,0,0,0,0,0,0,0],
[ 0,0,0,0,0,0,0,0,0,0,0],
[ 0,0,1,0,0,0,0,0,0,0,0],
[ 0,0,0,1,1,1,1,1,0,0,0]
],[
[ 0,0,1,1,1,1,1,1,0,0,0],
[ 0,0,0,0,0,0,1,0,1,0,0],
[ 0,0,0,0,0,1,0,0,0,1,0],
[ 0,0,0,1,1,0,0,0,1,0,0],
[ 0,0,0,1,0,0,0,0,0,1,0],
[ 0,0,0,0,1,0,0,0,0,0,0],
[ 0,0,0,0,0,1,1,0,0,0,0]
],[
[ 0,0,0,0,0,1,0,0,0,0,0],
[ 0,0,1,1,1,1,1,1,1,0,0],
[ 0,0,0,0,0,0,1,0,0,0,0],
[ 0,0,0,0,1,1,1,0,0,0,0],
[ 0,0,0,0,1,1,1,0,0,0,0],
[ 0,0,0,0,0,0,1,0,0,0,0],
[ 0,0,0,0,0,1,0,0,0,0,0]
],[
[ 0,0,1,1,0,0,0,1,1,0,0],
[ 0,0,1,1,0,0,0,1,1,0,0],
[ 0,0,1,1,0,0,0,1,1,0,0],
[ 0,0,1,1,0,0,0,1,1,0,0],
[ 0,0,0,0,0,0,0,0,0,0,0],
[ 0,0,1,1,0,0,0,1,1,0,0],
[ 0,0,1,1,0,0,0,1,1,0,0]
]]

w.wiringPiSetupGpio()
base = 0

for ano in range(7):
	w.pinMode( P_ANO[ano], 1 )
	w.digitalWrite( P_ANO[ano], 0 )
w.pinMode(P_MOT, 2)
w.pwmSetMode(0)
w.pwmSetRange(1024)
w.pwmSetClock(375)
m_deg = int(74+48/90*base)
w.pwmWrite(P_MOT, m_deg)

while 1:
	time.sleep(0.1)
	for base in range(110):
		m_deg = int(74+48/90*(base-90))
		w.pwmWrite(P_MOT, m_deg)
		for ano in range(7):
			w.digitalWrite( P_ANO[ano], DT[0][ano][base//10] ) 
		time.sleep( 0.002 )
	time.sleep(0.1)
	for base in reversed(range(0,110)):
		m_deg = int(74+48/90*(base-90))
		w.pwmWrite(P_MOT, m_deg)
		for ano in range(7):
			w.digitalWrite( P_ANO[ano], DT[0][ano][base//10] ) 
		time.sleep( 0.002 )
